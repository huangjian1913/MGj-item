"use strict";!function(r){var o,s,l,p,d=r(".cart_wrap .cart_list");function f(){var o=0,c=0;r(".cart_wrap nav:visible").each(function(i,e){r(e).find("li input:eq(0)").prop("checked")&&(o+=parseInt(r(e).find("li input:eq(1)").val()),c+=parseFloat(r(e).find(".list_total p").html()))}),r(".cart_footer p").eq(4).find("span").html(o),r(".cart_footer p").eq(5).find("span").html(c.toFixed(2))}r.cookie("cookiesid")&&r.cookie("cookienum")&&r.cookie("cookiecolor")&&r.cookie("cookiesize")&&(o=r.cookie("cookiesid").split(","),s=r.cookie("cookienum").split(","),l=r.cookie("cookiecolor").split(","),p=r.cookie("cookiesize").split(","),r.each(o,function(i,e){var c,n,t,a;c=o[i],n=s[i],t=l[i],a=p[i],r.ajax({url:"http://10.31.162.38/Mogujie/php/alldata.php",dataType:"json"}).done(function(i){r.each(i,function(i,e){var o;c==e.sid&&((o=r(".cart_wrap nav:hidden").clone(!0,!0)).find(".pic").find("img").attr("src",e.url),o.find(".pic").find("p").html(e.title),o.find(".pic").find("img").attr("sid",e.sid),o.find(".list_message").children().eq(0).find("span").html(t),o.find(".list_message").children().eq(1).find("span").html(a),o.find(".list_price").children().eq(0).html(e.oldprice),o.find(".list_price").children().eq(1).html(e.price),o.find(".list_num").find("input").val(n),o.find(".list_total").find("p").html((e.price*n).toFixed(2)),o.css("display","block"),d.append(o),f())})})})),r(".allsel").on("change",function(){r(".cart_wrap nav:visible").find(":checkbox").prop("checked",r(this).prop("checked")),r(".allsel").prop("checked",r(this).prop("checked")),f(),r(this).prop("checked")?r(".cart_footer p:eq(6)").css({background:"red"}):r(".cart_footer p:eq(6)").css({background:"#999"})});var i=r(".cart_wrap nav:visible").find(":checkbox");r(".cart_list").on("change",i,function(i){r(".cart_wrap nav:visible").find(":checkbox").length===r(".cart_wrap nav:visible").find("input:checked").size()?r(".allsel").prop("checked",!0):r(".allsel").prop("checked",!1),f(),1<=r(".cart_wrap nav:visible").find("input:checked").size()?r(".cart_footer p:eq(6)").css({background:"red"}):0===r(".cart_wrap nav:visible").find("input:checked").size()&&r(".cart_footer p:eq(6)").css({background:"#999"})}),r(".list_num input").on("change",function(i){i=i||window.event;var e=r(i.target)||r(i.srcElement);e.val()<1&&e.val(1);var o=e.parents("li").find(".list_price").find("p").html();e.parents("li").find(".list_total").find("p").html(parseFloat(e.val()*o).toFixed(2)),f(),function(i){a();var e=i.parents("li").find("img").attr("sid");n[r.inArray(e,c)]=i.parents("li").find(".list_num").find("input").val(),r.cookie("cookienum",n,10)}(e)});var c=[],n=[],e=[],t=[];function a(){t=r.cookie("cookiesid")&&r.cookie("cookienum")?(c=r.cookie("cookiesid").split(","),n=r.cookie("cookienum").split(","),e=r.cookie("cookiecolor").split(","),r.cookie("cookiesize").split(",")):(c=[],n=[],e=[],[])}function k(o,i){var c=-1;r.each(i,function(i,e){o===e&&(c=i)}),i.splice(c,1),n.splice(c,1),e.splice(c,1),t.splice(c,1),r.cookie("cookiesid",i,{expires:10,path:"/"}),r.cookie("cookienum",n,{expires:10,path:"/"}),r.cookie("cookiecolor",e,{expires:10,path:"/"}),r.cookie("cookiesize",t,{expires:10,path:"/"})}r("li a").on("click",function(){a(),window.confirm("你确定要删除吗?")&&(r(this).parents("nav").remove(),k(r(this).parents("li").find("img").attr("sid"),c),f())}),r(".cart_footer p:eq(1)").on("click",function(){a(),window.confirm("你确定要删除选中的吗?")&&(r("nav:visible").each(function(){r(this).find(":checkbox").is(":checked")&&(r(this).remove(),k(r(this).find("img").attr("sid"),c))}),f())})}(jQuery);