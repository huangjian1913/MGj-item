"use strict";!function(){for(var i=document.querySelectorAll(".detailpart .detail_left .bigpicbox"),e=document.querySelectorAll(".detailpart .detail_left .smallbox"),t=0;t<e.length;t++)!function(t){e[t].onmousemove=function(){for(var e=0;e<i.length;e++)i[e].style.display="none";i[t].style.display="block"}}(t)}(),function(){var l=location.search.substring(1).split("=")[1],i=document.querySelectorAll(".detailpart .detail_left .bigpicbox img"),o=document.querySelectorAll(".detailpart .detail_left .smallbox img"),r=document.querySelector(".detailpart .numbox span"),e=document.querySelector(".detailpart .detail_mid .addcart .add"),c=document.querySelector(".storepic .bigpic img"),a=document.querySelector(".detailpart .detail_mid p"),t=document.querySelectorAll(".detailpart .detail_mid .message p"),n=t[0].querySelector("span"),s=t[1].querySelector("span"),d=t[2].querySelectorAll("span")[1];$ajax({url:"http://10.31.162.38/Mogujie/php/detail.php",data:{sid:l}}).then(function(e){var t=JSON.parse(e);i[0].src=t.url1,o[0].src=t.url1,i[1].src=t.url2,o[1].src=t.url2,i[2].src=t.url3,o[2].src=t.url3,i[3].src=t.url4,o[3].src=t.url4,i[4].src=t.url,o[4].src=t.url,a.innerHTML=t.title,n.innerHTML="¥"+t.oldprice,s.innerHTML="¥"+t.price,d.innerHTML=t.sailnumber,c.src=t.piclisturl});var u=[],p=[],m=[],v=[];e.addEventListener("click",function(){var e,t,i=document.querySelector(".detailpart .color .color_select .active"),o=document.querySelector(".detailpart .size .size_select .active");i&&o&&(v=cookie.get("cookiesid")&&cookie.get("cookienum")&&cookie.get("cookiecolor")&&cookie.get("cookiesize")?(u=cookie.get("cookiesid").split(","),p=cookie.get("cookienum").split(","),m=cookie.get("cookiecolor").split(","),cookie.get("cookiesize").split(",")):(u=[],p=[],m=[],[]),-1!==u.indexOf(l)&&m[u.indexOf(l)]===i.innerHTML&&v[u.indexOf(l)]===o.innerHTML?(e=parseInt(p[u.indexOf(l)])+parseInt(r.innerHTML),p[u.indexOf(l)]=e,cookie.set("cookienum",p,10)):(u.push(l),t=parseInt(r.innerHTML),p.push(t),m.push(i.innerHTML),v.push(o.innerHTML),cookie.set("cookiesid",u,10),cookie.set("cookienum",p,10),cookie.set("cookiecolor",m,10),cookie.set("cookiesize",v,10)),alert("商品已经加入购物车了"))})}(),function(){$(".detailpart .detail_mid .addcart .add"),$(".detailpart .numbox span");var p=$(".detailpart .color .color_select .xuxian").siblings("p");console.log(p);var m=$(".detailpart .size .size_select p"),v=null;p.on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active").siblings(".detailpart .color .color_select p").removeClass("active")}),m.on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active").siblings(".detailpart .size .size_select p").removeClass("active")});var e=document.querySelectorAll(".detailpart .number p")[1],t=document.querySelectorAll(".detailpart .number p")[0],k=document.querySelector(".detailpart .numbox span"),i=document.querySelector(".detailpart .detail_mid .addcart .add"),f=document.querySelector(".header .header-wrap .gouwuche");e.onclick=function(){k.innerHTML=parseInt(k.innerHTML)+1},t.onclick=function(){parseInt(k.innerHTML)<=1?k.innerHTML=1:k.innerHTML=parseInt(k.innerHTML)-1},i.addEventListener("click",function(e){p.hasClass("active")&&m.hasClass("active")?v=!0:0!=p.hasClass("active")&&0!=m.hasClass("active")||(v=!1);var t,i,o=(e=e||window.event).clientX,l=e.clientY+scrollY,r=f.offsetLeft,c=f.offsetTop,a=r-400,n=c-400,s=-((c-n)*o-(r-a)*l+r*n-a*c)/((r-a)*(o-r)*(o-a)),d=((c-n)*o*o+r*r*n-a*a*c-(r*r-a*a)*l)/((r-a)*(o-r)*(o-a)),u=((r*n-a*c)*o*o-(r*r*n-a*a*c)*o+(r*r*a-r*a*a)*l)/((r-a)*(o-r)*(o-a));v&&(v=!1,(t=document.createElement("div")).className="cart_active",t.innerHTML=k.innerHTML,document.body.appendChild(t),t.style.left=o+"px",t.style.top=l+"px",i=setInterval(function(){l=s*(o+=10)*o+d*o+u,t.style.left=o+"px",t.style.top=l+"px",r<=o&&(clearInterval(i),t.remove(),v=!0)},60))},!0)}();